<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Prombt Master</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
<!-- Christmas background music and sounds -->
<audio id="christmasMusic" loop preload="auto">
  <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmkeBzOJ0O/NfwgHLIHOYF2OjJNPEAxgp+PwtmMcBjiR1/LMeSgF" type="audio/wav">
</audio>

<h1>Prombt Master</h1>

<div id="startScreen">
  <div class="christmas-banner">
    <span>ğŸ„ Ho Ho Ho! ğŸ„</span>
    <span>ğŸ Frohe Weihnachten! ğŸ</span>
    <span>â›„ Let it Snow! â›„</span>
  </div>
  
  <button id="createGameBtn">ğŸ… Weihnachtsspiel erstellen (Santa Host) ğŸ„</button>

  <h3>ğŸ¦Œ Rudolph's Team beitreten ğŸ¦Œ</h3>
  <input
    id="usernameInput"
    placeholder="ğŸ§â€â™‚ï¸ Dein Elf-Name"
    required
    minlength="2"
  >
  <input
    id="joinCodeInput"
    placeholder="ğŸ„ Magischer Weihnachtscode"
  >
  <button id="joinGameBtn">ğŸ¦Œ Zu Santa's Workshop</button>
</div>

<div id="hostLobby" class="hidden">
  <h2>ğŸ… Santa's Magischer Workshop-Code: ğŸ„</h2>
  <div id="lobbyCode" class="codeBox"></div>

  <h3>ğŸ§â€â™‚ï¸ Weihnachtself-Team: ğŸ§â€â™€ï¸</h3>
  <ul id="lobbyPlayers"></ul>

  <div id="hostImageUpload">
    <h3>ğŸ Weihnachtliche Vorlage hochladen: â­</h3>
    <p>ğŸ“¸ Lade ein Bild hoch, das die Elfen nachbauen sollen!</p>
    <input type="file" id="hostImageInput">
    <button id="uploadHostImageBtn">ğŸ„ Weihnachts-Vorlage hochladen</button>
  </div>

  <button id="startRoundBtn">ğŸ… Weihnachts-Runde starten! ğŸ¦Œ</button>
</div>

<div id="gameScreen" class="hidden">
  <p id="statusTxt"></p>
  
  <div id="hostTemplateImage" class="hidden">
    <h3>ğŸ Santa's Geschenk-Vorlage: ğŸ„</h3>
    <img id="templateImage" style="max-width: 400px; max-height: 400px; border-radius: 12px; margin: 20px 0;">
    <div id="gameInstruction">
      <h2 style="color: #ffeb3b; font-weight: bold; margin: 20px 0; text-shadow: 0 0 15px #ff5252;">
        ğŸ… HO HO HO! ERSCHAFFE DIESES WEIHNACHTSWUNDER MIT KI-MAGIE! ğŸ„
      </h2>
      <p style="color: #fff; font-size: 18px;">
        ğŸ§â€â™‚ï¸ Nutze ChatGPT, DALL-E, Midjourney oder andere KI-Tools! ğŸ§â€â™€ï¸
      </p>
    </div>
    <div id="timer" style="font-size: 28px; font-weight: bold; color: #ffeb3b; margin: 20px 0; text-shadow: 0 0 10px #ff5252;">
      â° Weihnachts-Timer: 01:30 ğŸ„
    </div>
  </div>

  <div id="playersInGame">
    <h4>ğŸ§â€â™‚ï¸ Weihnachtself-Team: ğŸ§â€â™€ï¸</h4>
    <ul id="gamePlayersList"></ul>
  </div>
  
  <div id="promptArea">
    <h4>ğŸ¨ Weihnachtliche KI-Magie beschwÃ¶ren: âœ¨</h4>
    <textarea id="promptInput" placeholder="ğŸ„ Beschreibe dein Weihnachtswunder... (z.B. 'Santa mit Rentieren im Schnee')" rows="3" style="width: 100%; padding: 10px; border-radius: 8px; border: 3px solid #ffeb3b; resize: vertical; font-family: inherit; background: #fff;"></textarea>
    
    <div style="margin: 10px 0;">
      <label for="aiModelSelect" style="font-weight: 600; margin-right: 10px; color: #ffeb3b;">ğŸ WÃ¤hle deine KI-Weihnachtsmagie:</label>
      <select id="aiModelSelect" style="padding: 8px; border-radius: 6px; border: 3px solid #ff5252; font-family: inherit; background: #fff;">
        <option value="stable-diffusion-xl">ğŸ„ Stable Diffusion XL (Weihnachts-Realistisch)</option>
        <option value="stable-diffusion-v1-5">â›„ Stable Diffusion v1.5 (Klassisch-Festlich)</option>
        <option value="dalle-mini">ğŸ¦Œ DALL-E Mini (Schnee-Schnell)</option>
        <option value="midjourney-style">ğŸ… Midjourney Style (Santa-KÃ¼nstlerisch)</option>
        <option value="anime-diffusion">ğŸ§â€â™€ï¸ Anime Diffusion (Elf-Anime-Stil)</option>
      </select>
    </div>
    
    <div style="margin: 10px 0;">
      <button id="enhancePromptBtn" style="margin: 5px;">âœ¨ Mit Gemini-Weihnachtsmagie verbessern â­</button>
      <button id="generateImageBtn" style="margin: 5px; background: linear-gradient(135deg, #ff5252, #ff1744);">ğŸ¨ Weihnachtsbild erschaffen! ğŸ„</button>
      <button id="clearPromptBtn" style="margin: 5px; background: linear-gradient(135deg, #666, #444);">ğŸ—‘ï¸ Schneemann schmelzen</button>
    </div>
    
    <div id="generatedImageArea" class="hidden" style="margin: 15px 0; padding: 15px; border: 3px dashed #ffeb3b; border-radius: 15px; background: linear-gradient(145deg, #ffffff22, #ffffff44);">
      <h4>ğŸ Dein Weihnachtswunder ist entstanden! â­</h4>
      <img id="generatedImage" style="max-width: 100%; max-height: 300px; border-radius: 12px; margin: 10px 0; border: 4px solid #ff5252;">
      <br>
      <button id="useGeneratedImageBtn" style="background: linear-gradient(135deg, #4CAF50, #45a049);">ğŸ„ Dieses Weihnachtswunder verwenden! âœ¨</button>
      <button id="regenerateBtn" style="background: linear-gradient(135deg, #ff5252, #ff1744); margin-left: 10px;">ğŸ”„ Neue Weihnachtsmagie! ğŸ…</button>
    </div>
  </div>

  <div id="uploadArea">
    <h4>ğŸ Oder lade dein eigenes Weihnachtsbild hoch: ğŸ“¸</h4>
    <input type="file" id="imageUpload" accept="image/*,.png,.jpg,.jpeg,.gif,.webp">
    <button id="uploadImageBtn">ğŸ„ Weihnachtsbild hochladen ğŸ…</button>
  </div>

  <button id="stopRoundBtn" class="hidden">ğŸ… Weihnachts-Runde beenden! ğŸ„</button>
</div>

<div id="votingSection" class="hidden">
  <div class="christmas-banner">
    <span>ğŸ„ Ho Ho Ho! Bewertungszeit! ğŸ„</span>
    <span>â­ Santa's Stern-Vergabe! â­</span>
    <span>ğŸ Wer bekommt das schÃ¶nste Geschenk? ğŸ</span>
  </div>
  
  <div id="playersInVoting">
    <h4>ğŸ§â€â™‚ï¸ Weihnachtself-Team: ğŸ§â€â™€ï¸</h4>
    <ul id="votingPlayersList"></ul>
  </div>
  <h3 style="text-align: center; color: #ffeb3b; margin: 20px 0; text-shadow: 0 0 10px #ff5252;">
    â­ ğŸ… Santa braucht deine Hilfe! Bewerte die Weihnachtswunder (1-5 Sterne)! ğŸ„ â­
  </h3>
  <div id="votingContainer"></div>
</div>

<div id="adminResults" class="hidden">
  <div class="christmas-banner">
    <span>ğŸ† Ho Ho Ho! Die Gewinner! ğŸ†</span>
    <span>ğŸ Santa's Favoriten! ğŸ</span>
    <span>â­ Weihnachtswunder-Champions! â­</span>
  </div>
  
  <h3 id="winnerName" style="color: #ffeb3b; text-shadow: 0 0 15px #ff5252;"></h3>
  <img id="winnerImage">
  <table id="resultsTable">
    <tr>
      <th>ğŸ§â€â™‚ï¸ Elf-Name ğŸ§â€â™€ï¸</th>
      <th>â­ Stern-Durchschnitt</th>
      <th>ğŸ„ Einzelbewertungen</th>
      <th>ğŸ Gesamt-Punkte</th>
    </tr>
  </table>
  <button id="newRoundBtn">ğŸ… NÃ¤chste Weihnachts-Runde! ğŸ¦Œ</button>
</div>

<script type="importmap">
{
  "imports": {
    "@google/generative-ai": "https://esm.run/@google/generative-ai"
  }
}
</script>
<script type="module" src="script.js"></script>
</body>
</html>
